# Phase 23, Plan 23-01: Fix Scroll Behavior in Results Page

**Phase**: 23 - Bugfix: Tree view and file preview scroll issues
**Plan**: 23-01 - Add horizontal and vertical scrolling to tree and preview
**Type**: Bugfix
**Estimate**: 30 minutes
**Created**: 2025-12-22

---

## Objective

Fix scroll behavior on the Step 4 Results page to enable:
1. **Tree view**: Horizontal scrolling for long file paths (not just vertical)
2. **File preview**: Proper scrolling for both axes

**Why This Matters**:
- Users see long deeply-nested file paths truncated in tree view
- File paths like `build/_deps/googletest-src/googlemock/include/gmock/internal/custom/gmock-matchers.h` are cut off
- Code preview may have long lines that need horizontal scrolling
- Poor UX - can't see full file names or wide code

**Success**: Both tree view and file preview scroll horizontally and vertically as needed

---

## Context

### Current State (Broken)

**Screenshot Analysis**:
- **Left panel (Tree view)**: Shows deeply nested folders
  - Path: `build/_deps/googletest-src/googlemock/include/gmock/internal/custom`
  - File: `gmoc...` (truncated, should show full `gmock-matchers.h`)
  - No horizontal scrollbar visible
  - Vertical scrolling works

- **Right panel (File preview)**: Shows code with tabs
  - Long file path in header: `build/_deps/googletest-src/.../gmock-matchers.h`
  - Code content with line numbers
  - May have long lines needing horizontal scroll

**Root Causes**:

1. **FileTreeView.tsx** (line 154-159):
   ```css
   .file-tree-view {
     border: 1px solid #ddd;
     border-radius: 4px;
     background-color: #fff;
     overflow: hidden;  /* âŒ Hides scrollbars */
   }
   ```
   - `overflow: hidden` prevents horizontal scrolling
   - Tree names get truncated with ellipsis

2. **TabbedCodeViewer.tsx** (line 139-143):
   ```css
   .tab-content {
     flex: 1;
     overflow: auto;  /* âœ… This is correct */
     padding: 0.5rem;
   }
   ```
   - This part is actually correct
   - However, child FileContentDisplay may have issues

3. **FileContentDisplay.tsx** (line 129-133):
   ```css
   .file-content-wrapper {
     flex: 1;
     overflow: auto;  /* âœ… Vertical + horizontal scroll */
     background-color: #fff;
   }
   ```
   - This is correct for the wrapper

4. **FileTreeView tree nodes** (line 161-167, 216-222):
   ```css
   .tree-node {
     ...
     overflow: hidden;
     text-overflow: ellipsis;
     white-space: nowrap;
   }
   .tree-name {
     ...
     overflow: hidden;
     text-overflow: ellipsis;
     white-space: nowrap;
   }
   ```
   - These styles truncate long names with `...`
   - Prevents horizontal scrolling of individual items

---

## Root Cause Analysis

### Issue 1: FileTreeView Container
**Location**: `FileTreeView.tsx:158`
```css
overflow: hidden;  /* âŒ Blocks scrolling */
```

**Problem**: Container has `overflow: hidden`, which:
- Prevents horizontal scrollbar from appearing
- Hides content that extends beyond container width
- react-arborist Tree component can't scroll horizontally

**Solution**: Change to `overflow: auto` to enable scrolling when needed

### Issue 2: Tree Node Text Truncation
**Location**: `FileTreeView.tsx:219-222`
```css
.tree-name {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
```

**Problem**: Individual tree nodes truncate text with ellipsis
- Long file names show as `gmoc...` instead of full `gmock-matchers.h`
- Prevents seeing full path even if user tries to scroll

**Solution**:
- Keep `white-space: nowrap` (prevents line wrapping)
- Remove `overflow: hidden` and `text-overflow: ellipsis`
- Let container scroll to show full text

---

## Tasks

### Task 1: Fix FileTreeView Horizontal Scrolling
**Type**: CSS Fix
**Action**: Enable horizontal scrolling in tree container
**Files**: `src/components/playground/wizard/FileTreeView.tsx`

**Steps**:
1. Read FileTreeView.tsx (lines 153-160)
2. Change `.file-tree-view` overflow from `hidden` to `auto`
3. This enables both horizontal and vertical scrolling

**Before** (line 153-159):
```css
.file-tree-view {
  border: 1px solid #ddd;
  border-radius: 4px;
  background-color: #fff;
  overflow: hidden;  /* âŒ Prevents scrolling */
}
```

**After**:
```css
.file-tree-view {
  border: 1px solid #ddd;
  border-radius: 4px;
  background-color: #fff;
  overflow: auto;  /* âœ… Enables horizontal + vertical scroll */
}
```

**Why This Works**:
- `overflow: auto` shows scrollbars only when content overflows
- Enables both X and Y axis scrolling
- react-arborist Tree can now scroll horizontally for wide content

**Verify**:
- âœ… TypeScript compiles
- âœ… Tree view shows horizontal scrollbar when needed
- âœ… Vertical scrolling still works

**Done When**: FileTreeView.tsx updated, compiles

---

### Task 2: Remove Tree Node Text Truncation
**Type**: CSS Fix
**Action**: Show full file names instead of truncating with ellipsis
**Files**: `src/components/playground/wizard/FileTreeView.tsx`

**Steps**:
1. Read FileTreeView.tsx (lines 216-222)
2. Update `.tree-name` styles to remove truncation
3. Keep `white-space: nowrap` but remove ellipsis

**Before** (line 216-222):
```css
.tree-name {
  font-size: 0.9rem;
  color: #333;
  overflow: hidden;         /* âŒ Truncates text */
  text-overflow: ellipsis;  /* âŒ Shows ... */
  white-space: nowrap;      /* âœ… Keep - prevents wrapping */
}
```

**After**:
```css
.tree-name {
  font-size: 0.9rem;
  color: #333;
  white-space: nowrap;  /* âœ… Prevents line wrapping */
  /* Removed overflow and text-overflow to show full text */
}
```

**Why This Works**:
- Text no longer truncated with `...`
- Container scroll (from Task 1) allows viewing full text
- `white-space: nowrap` prevents text wrapping to next line
- Full file names visible via horizontal scroll

**Alternative Approach** (if above doesn't work):
Add explicit width to tree nodes:
```css
.tree-node {
  min-width: max-content;  /* Forces node to be as wide as content */
}
```

**Verify**:
- âœ… Long file names show in full (no `...`)
- âœ… Horizontal scroll shows full text
- âœ… No unexpected line wrapping

**Done When**: Tree names show full text without truncation

---

### Task 3: Verify File Preview Scrolling
**Type**: Verification
**Action**: Ensure file preview already has proper scrolling
**Files**: `TabbedCodeViewer.tsx`, `FileContentDisplay.tsx`

**Steps**:
1. Read TabbedCodeViewer.tsx (lines 139-143)
2. Verify `.tab-content` has `overflow: auto` âœ…
3. Read FileContentDisplay.tsx (lines 129-133, 164)
4. Verify `.file-content-wrapper` has `overflow: auto` âœ…
5. Verify `.code-lines` has `overflow-x: auto` âœ…

**Current State** (ALREADY CORRECT):
```css
/* TabbedCodeViewer.tsx:139-143 */
.tab-content {
  flex: 1;
  overflow: auto;  /* âœ… Scroll both axes */
  padding: 0.5rem;
}

/* FileContentDisplay.tsx:129-133 */
.file-content-wrapper {
  flex: 1;
  overflow: auto;  /* âœ… Scroll both axes */
  background-color: #fff;
}

/* FileContentDisplay.tsx:164 */
.code-lines {
  flex: 1;
  padding: 1rem;
  overflow-x: auto;  /* âœ… Horizontal scroll for long lines */
}
```

**Conclusion**: File preview scrolling is already correctly implemented!
- No changes needed
- Document in SUMMARY as "verified working"

**Done When**: Verified file preview scroll works (no changes needed)

---

### Task 4: Manual Browser Testing
**Type**: Testing
**Action**: Verify scroll behavior in browser
**Files**: None (browser testing)

**Steps**:
1. Dev server should hot-reload automatically
2. Open: http://localhost:4321/cpp-to-c-website/playground
3. Complete transpilation to reach Step 4 (Results)
4. **Test Tree View Scrolling**:
   - âœ… Expand deeply nested folders (e.g., build/_deps/googletest-src/...)
   - âœ… Verify horizontal scrollbar appears for wide content
   - âœ… Scroll right to see full file names (no `...` truncation)
   - âœ… Vertical scrolling still works for long file lists
5. **Test File Preview Scrolling**:
   - âœ… Select a file with long lines (>120 characters)
   - âœ… Verify horizontal scrollbar appears for wide lines
   - âœ… Scroll right to see full line content
   - âœ… Vertical scrolling works for long files

**Expected Behavior**:

**Tree View**:
```
â”Œâ”€Transpiled Filesâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ build                              [â–¼]â”‚ â† Vertical scroll
â”‚   ğŸ“ _deps                                â”‚
â”‚     ğŸ“ googletest-src                     â”‚
â”‚       ğŸ“ googlemock                       â”‚
â”‚         ğŸ“ include                        â”‚
â”‚           ğŸ“ gmock                        â”‚
â”‚             ğŸ“ internal                   â”‚
â”‚               ğŸ“ custom                   â”‚
â”‚                 ğŸ“„ gmock-matchers.h       â”‚ â† Full name visible
â”‚                 ğŸ“„ gmock-generated-actions.h â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    [â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º]  â† Horizontal scroll
```

**File Preview**:
```
â”Œâ”€C++ Sourceâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ build/_deps/.../gmock-matchers.h    CPP â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  // Long copyright line that extendsâ”‚[â–¼]â”‚ â† Vertical scroll
â”‚ 2  // beyond the visible area...      â”‚  â”‚
â”‚ 3  #include <very/long/path/to/header>â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    [â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º]  â† Horizontal scroll
```

**Done When**: Browser testing confirms scroll works for both panels

---

### Task 5: Commit Changes
**Type**: Git
**Action**: Commit the scroll fixes
**Files**: `FileTreeView.tsx`

**Steps**:
1. Stage changes: `git add src/components/playground/wizard/FileTreeView.tsx`
2. Commit with descriptive message
3. Reference Phase 23-01

**Commit Message**:
```
fix(23-01): Enable horizontal scrolling in tree view and fix text truncation

Root causes:
1. FileTreeView container had overflow:hidden blocking scrollbars
2. Tree node text truncated with ellipsis (...) hiding full names

Changes:
- Changed .file-tree-view overflow from hidden to auto
- Removed overflow:hidden and text-overflow:ellipsis from .tree-name
- Kept white-space:nowrap to prevent line wrapping
- File preview already had correct scroll behavior (verified)

Impact:
- Tree view now scrolls horizontally for long file paths
- Full file names visible (no ... truncation)
- Users can see deeply nested paths like:
  build/_deps/googletest-src/googlemock/include/gmock/internal/custom/gmock-matchers.h
- Both vertical and horizontal scrolling work correctly
- File preview verified working (no changes needed)

Fixes: Phase 23-01 - Tree view and file preview scroll behavior
```

**Verify**:
- âœ… Commit created successfully
- âœ… Commit message is descriptive
- âœ… References Phase 23-01

**Done When**: Changes committed to git

---

## Verification

**Overall Success Criteria**:
- âœ… Changed FileTreeView overflow to auto
- âœ… Removed tree node text truncation
- âœ… Verified file preview scroll behavior
- âœ… TypeScript compiles without errors
- âœ… Tree view scrolls horizontally for wide content
- âœ… Full file names visible (no ellipsis)
- âœ… File preview scrolls both axes
- âœ… Browser testing confirms functionality
- âœ… Changes committed to git

**Definition of Done**:
- Browser testing shows horizontal scroll in tree view
- Long file names display in full without truncation
- File preview scrolls smoothly in both directions
- Commit created with detailed explanation

---

## Output

Create `23-01-SUMMARY.md` with:

### What Was Completed
- âœ… Task 1: Fixed FileTreeView horizontal scrolling
- âœ… Task 2: Removed tree node text truncation
- âœ… Task 3: Verified file preview scrolling (no changes needed)
- âœ… Task 4: Browser verification results
- âœ… Task 5: Changes committed

### Code Changes
```diff
# src/components/playground/wizard/FileTreeView.tsx

  .file-tree-view {
    border: 1px solid #ddd;
    border-radius: 4px;
    background-color: #fff;
-   overflow: hidden;
+   overflow: auto;
  }

  .tree-name {
    font-size: 0.9rem;
    color: #333;
-   overflow: hidden;
-   text-overflow: ellipsis;
    white-space: nowrap;
  }
```

### Verification Results
**Before Fix**:
- âŒ Tree view only scrolled vertically
- âŒ Long file names truncated with `...`
- âŒ Couldn't see full deeply nested paths
- âœ… File preview already worked correctly

**After Fix**:
- âœ… Tree view scrolls both horizontally and vertically
- âœ… Full file names visible without truncation
- âœ… Can scroll to see complete paths like:
  `build/_deps/googletest-src/googlemock/include/gmock/internal/custom/gmock-matchers.h`
- âœ… File preview verified working (no changes needed)

### Commits
- Commit hash and message

### Impact
- Users can see full file paths in tree view
- No more truncated names with `...`
- Better UX for projects with deep folder structures
- File preview already had correct scroll behavior
- Simple CSS fix, no breaking changes

---

**Status**: â¬œ Not Started
**Next**: Execute this plan to fix scroll behavior
