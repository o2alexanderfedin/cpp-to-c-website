# Phase 1, Plan 01-01: Wizard Stepper Component

**Phase**: 01 - Wizard Foundation & Navigation
**Plan**: 01-01 - Wizard Stepper Component
**Scope**: Visual stepper UI using react-use-wizard
**Estimate**: 1-2 hours

---

## Objective

Create a wizard stepper component using the battle-tested `react-use-wizard` library to provide visual step navigation (1→2→3→4) with next/back buttons and step validation.

**Why**: Establishes the foundational navigation UI that all 4 wizard steps will use. Using a public component (react-use-wizard, 37k/week downloads) instead of building from scratch saves time and provides a proven UX pattern.

---

## Context

**Existing code to understand:**
- `@src/components/playground/PlaygroundController.tsx` - current single-page implementation
- `@src/components/playground/PlaygroundWrapper.tsx` - client-side service instantiation pattern
- `@src/pages/playground.astro` - Astro page structure

**Patterns to follow:**
- React 19 with TypeScript (existing pattern)
- CSS-in-JS for styling (existing pattern in current components)
- Component tests with Vitest and @testing-library/react (existing pattern)
- Export via index.ts barrel file (existing pattern)

**New dependency:**
- `react-use-wizard@^2.3.0` - Hooks-based wizard library

---

## Tasks

### Task 1: Install react-use-wizard
**Type**: dependency
**Files**: `package.json`, `package-lock.json`

**Action**:
```bash
npm install react-use-wizard
```

**Verify**: Package appears in package.json dependencies, no version conflicts

**Done**: ✅ Dependency installed and tests pass

---

### Task 2: Create WizardStepper Component
**Type**: create
**Files**: `src/components/playground/wizard/WizardStepper.tsx`

**Action**:
Create a visual stepper component that:
1. Displays 4 step circles with labels (Source, Target, Transpile, Results)
2. Highlights current active step
3. Shows completed steps with checkmarks
4. Uses `useWizard` hook from react-use-wizard for state
5. Provides next/back button controls with proper disabled states
6. Follows existing CSS-in-JS styling pattern

**Component API**:
```typescript
interface WizardStepperProps {
  // No props needed - gets state from useWizard context
}

export const WizardStepper: React.FC<WizardStepperProps>;
```

**Styling requirements**:
- Horizontal step indicator at top of wizard
- Circle for each step with number (1, 2, 3, 4)
- Line connecting steps
- Active step: blue/primary color
- Completed step: green with checkmark icon
- Inactive step: gray
- Step labels below circles
- Next/Back buttons below stepper
- Responsive: stack vertically on mobile (<640px)

**Verify**:
- Component renders 4 steps
- Highlights step 1 by default
- Next button enabled, Back button disabled on first step
- Uses useWizard hook correctly

**Done**: ✅ Component created, renders correctly, hooks work

---

### Task 3: Create Wizard Shell Component
**Type**: create
**Files**: `src/components/playground/wizard/PlaygroundWizard.tsx`

**Action**:
Create the main wizard container that:
1. Wraps content in `<Wizard>` provider from react-use-wizard
2. Renders WizardStepper at top
3. Defines 4 step placeholders (empty divs with labels for now)
4. Provides wizard wrapper styling

**Component structure**:
```typescript
import { Wizard } from 'react-use-wizard';

export const PlaygroundWizard: React.FC = () => {
  return (
    <div className="playground-wizard">
      <WizardStepper />

      <Wizard>
        <div>Step 1: Source Selection (placeholder)</div>
        <div>Step 2: Target Selection (placeholder)</div>
        <div>Step 3: Transpilation (placeholder)</div>
        <div>Step 4: Results (placeholder)</div>
      </Wizard>
    </div>
  );
};
```

**Verify**:
- Wizard provider wraps steps
- WizardStepper renders at top
- Can navigate through 4 placeholder steps
- Context is shared between stepper and steps

**Done**: ✅ Wizard shell created, navigation works

---

### Task 4: Component Tests
**Type**: test
**Files**: `src/components/playground/wizard/WizardStepper.test.tsx`

**Action**:
Create unit tests for WizardStepper covering:
1. Renders 4 steps with correct labels
2. Highlights active step (step 1 initially)
3. Next button click advances to step 2
4. Back button disabled on step 1
5. Back button click returns to previous step
6. All 4 steps reachable via navigation

Use existing test patterns:
```typescript
import { render, screen, fireEvent } from '@testing-library/react';
import { Wizard } from 'react-use-wizard';
import { WizardStepper } from './WizardStepper';

describe('WizardStepper', () => {
  const renderWithWizard = () => {
    return render(
      <Wizard>
        <div>Step 1</div>
        <div>Step 2</div>
        <div>Step 3</div>
        <div>Step 4</div>
      </Wizard>
    );
  };

  it('renders 4 steps', () => {
    // Test implementation
  });

  // ... more tests
});
```

**Verify**:
- All tests pass
- Coverage >80% for WizardStepper
- Tests run in CI (npm test)

**Done**: ✅ Tests written and passing

---

### Task 5: Export and Integration
**Type**: update
**Files**: `src/components/playground/wizard/index.ts`, `src/pages/playground.astro`

**Action**:
1. Create barrel export file:
```typescript
// src/components/playground/wizard/index.ts
export { WizardStepper } from './WizardStepper';
export { PlaygroundWizard } from './PlaygroundWizard';
```

2. Update playground.astro to use new wizard:
```typescript
---
import MainLayout from '../layouts/MainLayout.astro';
import { PlaygroundWizard } from '../components/playground/wizard';
import { getBrowserCompatibilityMessage } from '../lib/playground/setup';

const compatibilityMessage = getBrowserCompatibilityMessage(3);
---

<MainLayout title="Playground">
  <!-- Keep existing browser compatibility message -->
  <div class="browser-compatibility">
    <h2>Browser Compatibility</h2>
    <p>{compatibilityMessage}</p>
  </div>

  <!-- Replace PlaygroundWrapper with PlaygroundWizard -->
  <PlaygroundWizard client:only="react" />
</MainLayout>
```

**Verify**:
- Imports work
- Playground page renders wizard
- Navigation works in browser
- No console errors

**Done**: ✅ Wizard integrated into playground page

---

## Verification

**Overall checks after all tasks complete:**

1. ✅ `npm install` succeeds with react-use-wizard
2. ✅ `npm run test` passes all tests
3. ✅ `npm run dev` starts without errors
4. ✅ Navigate to http://localhost:4321/cpp-to-c-website/playground
5. ✅ See wizard stepper with 4 steps
6. ✅ Can click Next to advance through steps 1→2→3→4
7. ✅ Can click Back to return to previous step
8. ✅ Back button disabled on step 1, Next button disabled on step 4
9. ✅ Active step is highlighted
10. ✅ No TypeScript errors in IDE
11. ✅ No console errors in browser

---

## Success Criteria

- [x] react-use-wizard installed and working
- [x] WizardStepper component renders 4 steps
- [x] Step navigation (next/back) works correctly
- [x] Button states (enabled/disabled) are correct
- [x] PlaygroundWizard shell integrates stepper with step content
- [x] Unit tests pass with >80% coverage
- [x] Wizard displays in browser without errors
- [x] All existing tests still pass (no regressions)

---

## Output: SUMMARY.md

When this plan is complete, create `01-01-SUMMARY.md` with:

```markdown
# Phase 1, Plan 01-01: Wizard Stepper Component - COMPLETE

**Status**: ✅ Complete
**Completed**: [date]
**Duration**: [actual time]

## What Was Built

- Installed react-use-wizard (hooks-based wizard library)
- Created WizardStepper component with 4-step visual indicator
- Created PlaygroundWizard shell wrapping stepper + step content
- Integrated wizard into playground.astro page
- Added unit tests (X tests, Y% coverage)

## Files Changed

- `package.json` - Added react-use-wizard dependency
- `src/components/playground/wizard/WizardStepper.tsx` - NEW (Xlines)
- `src/components/playground/wizard/WizardStepper.test.tsx` - NEW (X lines)
- `src/components/playground/wizard/PlaygroundWizard.tsx` - NEW (X lines)
- `src/components/playground/wizard/index.ts` - NEW
- `src/pages/playground.astro` - Updated to use PlaygroundWizard

## Tests

- Unit tests: X passing, 0 failing
- E2E tests: Not yet (coming in 01-03)
- Coverage: X% (target: >80%)

## Verification

✅ All success criteria met
✅ No regressions in existing tests
✅ Wizard renders and navigates correctly in browser

## Deviations from Plan

[None] OR [List any changes made during implementation]

## Next Steps

Ready for **01-02**: Wizard State & Step Shells
- Create step component shells (Step1, Step2, Step3, Step4)
- Implement wizard state management
- Add step validation logic

## Commits

- `[commit-hash]` feat(wizard): Add wizard stepper with react-use-wizard
- `[commit-hash]` test(wizard): Add WizardStepper unit tests
- `[commit-hash]` feat(wizard): Integrate wizard into playground page
```

---

**Ready to execute**: Run this plan with `/run-plan .planning/phases/01-wizard-foundation/01-01-PLAN.md`
